<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Disruptors Fund Dashboard</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; padding: 0; background: #f9f9f9; color: #222;
    }
    header {
      background: #1E88E5;
      color: white;
      padding: 20px 10px;
      text-align: center;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    }
    h1 {
      margin: 0; font-weight: 700;
      font-size: 2rem;
    }
    main {
      max-width: 1200px;
      margin: 30px auto;
      padding: 0 20px 50px;
    }
    section {
      background: white;
      padding: 20px;
      margin-bottom: 50px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    h2 {
      font-weight: 600;
      margin-bottom: 20px;
      border-bottom: 2px solid #1E88E5;
      padding-bottom: 6px;
      color: #0D47A1;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      margin-bottom: 20px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px 10px;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }
    th {
      background-color: #1E88E5;
      color: white;
      text-align: center;
    }
    td:first-child, th:first-child {
      text-align: left;
      font-weight: 600;
    }
    canvas {
      max-width: 100%;
      height: 350px !important;
      margin-bottom: 30px;
    }
    /* Improve spacing between charts */
    .chart-container {
      margin-bottom: 60px;
    }
    /* Tooltip enhancements */
    .chartjs-tooltip {
      opacity: 1;
      position: absolute;
      background: rgba(0,0,0,0.7);
      color: white;
      border-radius: 3px;
      padding: 6px 8px;
      pointer-events: none;
      transform: translate(-50%, 0);
      transition: all 0.1s ease;
      font-size: 0.85rem;
    }
    /* Legend improvements */
    .legend {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 0.9rem;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      user-select: none;
    }
    .legend-color {
      width: 14px;
      height: 14px;
      border-radius: 3px;
    }
  </style>
</head>
<body>

<header>
  <h1>AI Disruptors Fund Dashboard</h1>
  <p>Tracking Monthly Prices, Returns, Cumulative Returns & Rebalancing Log</p>
</header>

<main>
  <section id="prices-section">
    <h2>Monthly Prices (USD)</h2>
    <div class="chart-container">
      <canvas id="monthlyPricesChart"></canvas>
    </div>
    <table>
      <thead>
        <tr><th>Date</th><th>NVDA</th><th>PLTR</th><th>AMD</th><th>MSFT</th><th>AVGO</th><th>QQQ</th></tr>
      </thead>
      <tbody id="monthlyPricesTableBody"></tbody>
    </table>
  </section>

  <section id="returns-section">
    <h2>Monthly Returns (%)</h2>
    <div class="chart-container">
      <canvas id="monthlyReturnsChart"></canvas>
    </div>
    <table>
      <thead>
        <tr><th>Date</th><th>NVDA</th><th>PLTR</th><th>AMD</th><th>MSFT</th><th>AVGO</th><th>QQQ</th></tr>
      </thead>
      <tbody id="monthlyReturnsTableBody"></tbody>
    </table>
  </section>

  <section id="cumulative-section">
    <h2>Cumulative Returns (%)</h2>
    <div class="chart-container">
      <canvas id="cumulativeReturnsChart"></canvas>
    </div>
    <table>
      <thead>
        <tr><th>Date</th><th>NVDA</th><th>PLTR</th><th>AMD</th><th>MSFT</th><th>AVGO</th><th>QQQ</th></tr>
      </thead>
      <tbody id="cumulativeReturnsTableBody"></tbody>
    </table>
  </section>

  <section id="rebalancing-section">
    <h2>Rebalancing Log</h2>
    <table>
      <thead>
        <tr><th>Date</th><th>Pre-Rebalance Value</th><th>New Weights</th><th>Rationale</th><th>Post-Rebalance Value</th></tr>
      </thead>
      <tbody id="rebalancingLogBody"></tbody>
    </table>
  </section>
</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Data -- abbreviated for readability here, replace with your full data in the same format
  const monthlyPricesData = [
    { date: "2024-01-01", NVDA: 51.99, PLTR: 19.51, AMD: 152.97, MSFT: 361.52, AVGO: 116.18, QQQ: 346.50 },
    { date: "2024-02-01", NVDA: 52.83, PLTR: 19.65, AMD: 160.18, MSFT: 365.66, AVGO: 123.81, QQQ: 342.32 },
    { date: "2024-03-01", NVDA: 57.83, PLTR: 20.37, AMD: 163.13, MSFT: 336.17, AVGO: 145.82, QQQ: 340.86 },
    { date: "2024-04-01", NVDA: 68.38, PLTR: 18.08, AMD: 163.12, MSFT: 306.05, AVGO: 142.64, QQQ: 323.74 },
    { date: "2024-05-01", NVDA: 68.83, PLTR: 17.64, AMD: 143.89, MSFT: 340.09, AVGO: 135.39, QQQ: 328.23 },
    { date: "2024-06-01", NVDA: 69.28, PLTR: 18.37, AMD: 137.85, MSFT: 396.42, AVGO: 132.65, QQQ: 351.34 },
    { date: "2024-07-01", NVDA: 82.30, PLTR: 16.80, AMD: 135.64, MSFT: 405.46, AVGO: 148.78, QQQ: 428.15 },
    { date: "2024-08-01", NVDA: 91.08, PLTR: 17.94, AMD: 154.04, MSFT: 458.31, AVGO: 158.13, QQQ: 448.46 },
    { date: "2024-09-01", NVDA: 89.54, PLTR: 17.40, AMD: 163.96, MSFT: 488.64, AVGO: 154.50, QQQ: 473.47 },
    { date: "2024-10-01", NVDA: 97.08, PLTR: 17.41, AMD: 139.97, MSFT: 471.77, AVGO: 167.06, QQQ: 484.15 },
    { date: "2024-11-01", NVDA: 95.50, PLTR: 16.89, AMD: 148.71, MSFT: 502.98, AVGO: 173.70, QQQ: 405.78 },
    { date: "2024-12-01", NVDA: 93.92, PLTR: 20.52, AMD: 147.44, MSFT: 595.42, AVGO: 195.73, QQQ: 416.87 },
    { date: "2025-01-01", NVDA: 99.01, PLTR: 21.11, AMD: 141.88, MSFT: 611.15, AVGO: 187.86, QQQ: 431.89 },
    { date: "2025-02-01", NVDA: 83.03, PLTR: 19.51, AMD: 154.82, MSFT: 725.11, AVGO: 187.34, QQQ: 551.23 },
    { date: "2025-03-01", NVDA: 71.20, PLTR: 21.70, AMD: 175.43, MSFT: 556.90, AVGO: 185.62, QQQ: 557.17 },
    { date: "2025-04-01", NVDA: 69.33, PLTR: 19.70, AMD: 197.03, MSFT: 619.38, AVGO: 164.02, QQQ: 590.68 },
    { date: "2025-05-01", NVDA: 64.39, PLTR: 20.71, AMD: 186.40, MSFT: 643.36, AVGO: 173.80, QQQ: 606.35 },
    { date: "2025-06-01", NVDA: 68.35, PLTR: 17.27, AMD: 186.23, MSFT: 643.42, AVGO: 183.55, QQQ: 553.68 },
    { date: "2025-07-01", NVDA: 64.19, PLTR: 15.49, AMD: 197.99, MSFT: 668.63, AVGO: 189.15, QQQ: 633.57 },
    { date: "2025-08-01", NVDA: 57.05, PLTR: 16.26, AMD: 223.24, MSFT: 555.79, AVGO: 190.39, QQQ: 700.21 },
  ];

  const monthlyReturnsData = [
    { date: "2024-02-01", NVDA: 0.0162, PLTR: 0.0074, AMD: 0.0471, MSFT: 0.0114, AVGO: 0.0657, QQQ: -0.0121 },
    { date: "2024-03-01", NVDA: 0.0948, PLTR: 0.0368, AMD: 0.0184, MSFT: -0.0806, AVGO: 0.1778, QQQ: -0.0043 },
    { date: "2024-04-01", NVDA: 0.1823, PLTR: -0.1125, AMD: -0.0001, MSFT: -0.0896, AVGO: -0.0218, QQQ: -0.0502 },
    { date: "2024-05-01", NVDA: 0.0066, PLTR: -0.0244, AMD: -0.1179, MSFT: 0.1113, AVGO: -0.0508, QQQ: 0.0139 },
    { date: "2024-06-01", NVDA: 0.0066, PLTR: 0.0411, AMD: -0.0420, MSFT: 0.1656, AVGO: -0.0202, QQQ: 0.0704 },
    { date: "2024-07-01", NVDA: 0.1879, PLTR: -0.0851, AMD: -0.0161, MSFT: 0.0228, AVGO: 0.1215, QQQ: 0.2186 },
    { date: "2024-08-01", NVDA: 0.1067, PLTR: 0.0676, AMD: 0.1357, MSFT: 0.1304, AVGO: 0.0629, QQQ: 0.0475 },
    { date: "2024-09-01", NVDA: -0.0169, PLTR: -0.0301, AMD: 0.0644, MSFT: 0.0662, AVGO: -0.0230, QQQ: 0.0558 },
    { date: "2024-10-01", NVDA: 0.0843, PLTR: 0.0008, AMD: -0.1463, MSFT: -0.0345, AVGO: 0.0813, QQQ: 0.0226 },
    { date: "2024-11-01", NVDA: -0.0163, PLTR: -0.0302, AMD: 0.0624, MSFT: 0.0661, AVGO: 0.0397, QQQ: -0.1619 },
    { date: "2024-12-01", NVDA: -0.0166, PLTR: 0.2152, AMD: -0.0085, MSFT: 0.1838, AVGO: 0.1269, QQQ: 0.0273 },
    { date: "2025-01-01", NVDA: 0.0542, PLTR: 0.0287, AMD: -0.0377, MSFT: 0.0264, AVGO: -0.0402, QQQ: 0.0360 },
    { date: "2025-02-01", NVDA: -0.1613, PLTR: -0.0758, AMD: 0.0912, MSFT: 0.1865, AVGO: -0.0028, QQQ: 0.2763 },
    { date: "2025-03-01", NVDA: -0.1425, PLTR: 0.1123, AMD: 0.1331, MSFT: -0.2320, AVGO: -0.0092, QQQ: 0.0108 },
    { date: "2025-04-01", NVDA: -0.0262, PLTR: -0.0921, AMD: 0.1231, MSFT: 0.1122, AVGO: -0.1164, QQQ: 0.0602 },
    { date: "2025-05-01", NVDA: -0.0713, PLTR: 0.0509, AMD: -0.0539, MSFT: 0.0387, AVGO: 0.0596, QQQ: 0.0265 },
    { date: "2025-06-01", NVDA: 0.0614, PLTR: -0.1660, AMD: -0.0009, MSFT: 0.0001, AVGO: 0.0561, QQQ: -0.0869 },
    { date: "2025-07-01", NVDA: -0.0608, PLTR: -0.1028, AMD: 0.0631, MSFT: 0.0392, AVGO: 0.0305, QQQ: 0.1443 },
    { date: "2025-08-01", NVDA: -0.1112, PLTR: 0.0497, AMD: 0.1276, MSFT: -0.1688, AVGO: 0.0065, QQQ: 0.1052 },
  ];

  const cumulativeReturnsData = [
    { date: "2024-02-01", NVDA: 1.0162, PLTR: 1.0074, AMD: 1.0471, MSFT: 1.0114, AVGO: 1.0657, QQQ: 0.9879 },
    { date: "2024-03-01", NVDA: 1.1125, PLTR: 1.0444, AMD: 1.0664, MSFT: 0.9299, AVGO: 1.2552, QQQ: 0.9837 },
    { date: "2024-04-01", NVDA: 1.3153, PLTR: 0.9270, AMD: 1.0663, MSFT: 0.8465, AVGO: 1.2278, QQQ: 0.9343 },
    { date: "2024-05-01", NVDA: 1.3239, PLTR: 0.9043, AMD: 0.9407, MSFT: 0.9407, AVGO: 1.1654, QQQ: 0.9473 },
    { date: "2024-06-01", NVDA: 1.3327, PLTR: 0.9415, AMD: 0.9012, MSFT: 1.0965, AVGO: 1.1418, QQQ: 1.0140 },
    { date: "2024-07-01", NVDA: 1.5831, PLTR: 0.8614, AMD: 0.8867, MSFT: 1.1215, AVGO: 1.2806, QQQ: 1.2356 },
    { date: "2024-08-01", NVDA: 1.7521, PLTR: 0.9196, AMD: 1.0070, MSFT: 1.2677, AVGO: 1.3611, QQQ: 1.2943 },
    { date: "2024-09-01", NVDA: 1.7224, PLTR: 0.8919, AMD: 1.0718, MSFT: 1.3516, AVGO: 1.3299, QQQ: 1.3664 },
    { date: "2024-10-01", NVDA: 1.8675, PLTR: 0.8927, AMD: 0.9150, MSFT: 1.3050, AVGO: 1.4380, QQQ: 1.3973 },
    { date: "2024-11-01", NVDA: 1.8370, PLTR: 0.8657, AMD: 0.9721, MSFT: 1.3913, AVGO: 1.4951, QQQ: 1.1711 },
    { date: "2024-12-01", NVDA: 1.8066, PLTR: 1.0521, AMD: 0.9639, MSFT: 1.6470, AVGO: 1.6848, QQQ: 1.2031 },
    { date: "2025-01-01", NVDA: 1.9045, PLTR: 1.0822, AMD: 0.9275, MSFT: 1.6905, AVGO: 1.6171, QQQ: 1.2464 },
    { date: "2025-02-01", NVDA: 1.5972, PLTR: 1.0002, AMD: 1.0121, MSFT: 2.0057, AVGO: 1.6126, QQQ: 1.5909 },
    { date: "2025-03-01", NVDA: 1.3696, PLTR: 1.1125, AMD: 1.1468, MSFT: 1.5404, AVGO: 1.5977, QQQ: 1.6080 },
    { date: "2025-04-01", NVDA: 1.3337, PLTR: 1.0100, AMD: 1.2880, MSFT: 1.7133, AVGO: 1.4118, QQQ: 1.7047 },
    { date: "2025-05-01", NVDA: 1.2386, PLTR: 1.0614, AMD: 1.2185, MSFT: 1.7796, AVGO: 1.4960, QQQ: 1.7499 },
    { date: "2025-06-01", NVDA: 1.3147, PLTR: 0.8853, AMD: 1.2174, MSFT: 1.7797, AVGO: 1.5799, QQQ: 1.5979 },
    { date: "2025-07-01", NVDA: 1.2348, PLTR: 0.7942, AMD: 1.2943, MSFT: 1.8495, AVGO: 1.6281, QQQ: 1.8285 },
    { date: "2025-08-01", NVDA: 1.0974, PLTR: 0.8337, AMD: 1.4594, MSFT: 1.5374, AVGO: 1.6388, QQQ: 2.0208 },
  ];

  const rebalancingLog = [
    {
      date: "2024-01-01",
      preValue: 10000,
      newWeights: { NVDA: 0.2, PLTR: 0.2, AMD: 0.2, MSFT: 0.2, AVGO: 0.2 },
      rationale: "Equal-weight rebalancing every quarter",
      postValue: 10000,
    },
    {
      date: "2024-04-01",
      preValue: 10000,
      newWeights: { NVDA: 0.2, PLTR: 0.2, AMD: 0.2, MSFT: 0.2, AVGO: 0.2 },
      rationale: "Equal-weight rebalancing every quarter",
      postValue: 10000,
    },
    {
      date: "2024-07-01",
      preValue: 10000,
      newWeights: { NVDA: 0.2, PLTR: 0.2, AMD: 0.2, MSFT: 0.2, AVGO: 0.2 },
      rationale: "Equal-weight rebalancing every quarter",
      postValue: 10000,
    },
    {
      date: "2024-10-01",
      preValue: 10000,
      newWeights: { NVDA: 0.2, PLTR: 0.2, AMD: 0.2, MSFT: 0.2, AVGO: 0.2 },
      rationale: "Equal-weight rebalancing every quarter",
      postValue: 10000,
    },
    {
      date: "2025-01-01",
      preValue: 10000,
      newWeights: { NVDA: 0.2, PLTR: 0.2, AMD: 0.2, MSFT: 0.2, AVGO: 0.2 },
      rationale: "Equal-weight rebalancing every quarter",
      postValue: 10000,
    },
    {
      date: "2025-04-01",
      preValue: 10000,
      newWeights: { NVDA: 0.2, PLTR: 0.2, AMD: 0.2, MSFT: 0.2, AVGO: 0.2 },
      rationale: "Equal-weight rebalancing every quarter",
      postValue: 10000,
    },
    {
      date: "2025-07-01",
      preValue: 10000,
      newWeights: { NVDA: 0.2, PLTR: 0.2, AMD: 0.2, MSFT: 0.2, AVGO: 0.2 },
      rationale: "Equal-weight rebalancing every quarter",
      postValue: 10000,
    },
  ];

  // Utility: format number as $X,XXX.XX with sign for positive/negative
  function formatDollar(value) {
    const sign = value > 0 ? '+' : value < 0 ? '-' : '';
    return sign + '$' + Math.abs(value).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  }

  // Format percent with sign and 2 decimals
  function formatPercent(value) {
    const sign = value > 0 ? '+' : value < 0 ? '-' : '';
    return sign + Math.abs(value * 100).toFixed(2) + '%';
  }

  // Format cumulative return as percent change from 1 (e.g., 1.25 -> +25.00%)
  function formatCumulative(value) {
    const pct = (value - 1) * 100;
    const sign = pct > 0 ? '+' : pct < 0 ? '-' : '';
    return sign + Math.abs(pct).toFixed(2) + '%';
  }

  // Fill Monthly Prices Table
  const monthlyPricesTableBody = document.getElementById('monthlyPricesTableBody');
  monthlyPricesData.forEach(row => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${row.date}</td>
      <td>${formatDollar(row.NVDA)}</td>
      <td>${formatDollar(row.PLTR)}</td>
      <td>${formatDollar(row.AMD)}</td>
      <td>${formatDollar(row.MSFT)}</td>
      <td>${formatDollar(row.AVGO)}</td>
      <td>${formatDollar(row.QQQ)}</td>
    `;
    monthlyPricesTableBody.appendChild(tr);
  });

  // Fill Monthly Returns Table
  const monthlyReturnsTableBody = document.getElementById('monthlyReturnsTableBody');
  monthlyReturnsData.forEach(row => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${row.date}</td>
      <td>${formatPercent(row.NVDA)}</td>
      <td>${formatPercent(row.PLTR)}</td>
      <td>${formatPercent(row.AMD)}</td>
      <td>${formatPercent(row.MSFT)}</td>
      <td>${formatPercent(row.AVGO)}</td>
      <td>${formatPercent(row.QQQ)}</td>
    `;
    monthlyReturnsTableBody.appendChild(tr);
  });

  // Fill Cumulative Returns Table
  const cumulativeReturnsTableBody = document.getElementById('cumulativeReturnsTableBody');
  cumulativeReturnsData.forEach(row => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${row.date}</td>
      <td>${formatCumulative(row.NVDA)}</td>
      <td>${formatCumulative(row.PLTR)}</td>
      <td>${formatCumulative(row.AMD)}</td>
      <td>${formatCumulative(row.MSFT)}</td>
      <td>${formatCumulative(row.AVGO)}</td>
      <td>${formatCumulative(row.QQQ)}</td>
    `;
    cumulativeReturnsTableBody.appendChild(tr);
  });

  // Fill Rebalancing Log Table
  const rebalancingLogBody = document.getElementById('rebalancingLogBody');
  rebalancingLog.forEach(row => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${row.date}</td>
      <td>${formatDollar(row.preValue)}</td>
      <td>${Object.entries(row.newWeights).map(([k,v]) => `${k}: ${(v*100).toFixed(1)}%`).join(', ')}</td>
      <td>${row.rationale}</td>
      <td>${formatDollar(row.postValue)}</td>
    `;
    rebalancingLogBody.appendChild(tr);
  });

  // Prepare chart datasets helper
  function createDataset(label, data, color, yAxisID = 'y') {
    return {
      label,
      data,
      borderColor: color,
      backgroundColor: color + '44',
      fill: false,
      tension: 0.2,
      pointRadius: 3,
      yAxisID,
    };
  }

  // Color palette for charts
  const colors = {
    NVDA: '#1f77b4',
    PLTR: '#ff7f0e',
    AMD: '#2ca02c',
    MSFT: '#d62728',
    AVGO: '#9467bd',
    QQQ: '#8c564b',
  };

  // Monthly Prices Chart - with $ and better spacing
  const monthlyPricesCtx = document.getElementById('monthlyPricesChart').getContext('2d');
  const monthlyPricesChart = new Chart(monthlyPricesCtx, {
    type: 'line',
    data: {
      labels: monthlyPricesData.map(d => d.date),
      datasets: Object.keys(colors).map(ticker =>
        createDataset(ticker, monthlyPricesData.map(d => d[ticker]), colors[ticker])
      )
    },
    options: {
      responsive: true,
      interaction: {
        mode: 'nearest',
        intersect: false
      },
      plugins: {
        tooltip: {
          callbacks: {
            label: ctx => `${ctx.dataset.label}: $${ctx.parsed.y.toFixed(2)}`
          }
        },
        legend: {
          labels: { usePointStyle: true }
        },
        title: {
          display: true,
          text: 'Monthly Prices ($)'
        }
      },
      scales: {
        y: {
          beginAtZero: false,
          ticks: {
            callback: val => '$' + val.toFixed(0)
          },
          title: { display: true, text: 'Price (USD)' }
        },
        x: {
          title: { display: true, text: 'Date' }
        }
      }
    }
  });

  // Monthly Returns Chart - simplify by showing only NVDA, MSFT, QQQ by default (others can be toggled)
  const monthlyReturnsCtx = document.getElementById('monthlyReturnsChart').getContext('2d');
  const allReturnDatasets = Object.keys(colors).map(ticker =>
    createDataset(ticker, monthlyReturnsData.map(d => d[ticker]), colors[ticker], 'y')
  );

  // Make PLTR, AMD, AVGO datasets initially hidden for less clutter
  allReturnDatasets.forEach(ds => {
    if(['PLTR', 'AMD', 'AVGO'].includes(ds.label)) ds.hidden = true;
  });

  const monthlyReturnsChart = new Chart(monthlyReturnsCtx, {
    type: 'line',
    data: {
      labels: monthlyReturnsData.map(d => d.date),
      datasets: allReturnDatasets
    },
    options: {
      responsive: true,
      interaction: {
        mode: 'nearest',
        intersect: false
      },
      plugins: {
        tooltip: {
          callbacks: {
            label: ctx => {
              const val = ctx.parsed.y * 100;
              const sign = val > 0 ? '+' : val < 0 ? '-' : '';
              return `${ctx.dataset.label}: ${sign}${Math.abs(val).toFixed(2)}%`;
            }
          }
        },
        legend: {
          labels: { usePointStyle: true }
        },
        title: {
          display: true,
          text: 'Monthly Returns (%) - Less Cluttered (Toggle lines in legend)'
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            callback: val => val + '%'
          },
          title: { display: true, text: 'Return (%)' }
        },
        x: {
          title: { display: true, text: 'Date' }
        }
      }
    }
  });

  // Cumulative Returns Chart - format y-axis as %
  const cumulativeReturnsCtx = document.getElementById('cumulativeReturnsChart').getContext('2d');
  const cumulativeReturnsChart = new Chart(cumulativeReturnsCtx, {
    type: 'line',
    data: {
      labels: cumulativeReturnsData.map(d => d.date),
      datasets: Object.keys(colors).map(ticker => {
        return {
          ...createDataset(ticker, cumulativeReturnsData.map(d => (d[ticker] - 1) * 100), colors[ticker]),
          label: ticker + ' Cumulative Return'
        }
      })
    },
    options: {
      responsive: true,
      interaction: {
        mode: 'nearest',
        intersect: false
      },
      plugins: {
        tooltip: {
          callbacks: {
            label: ctx => `${ctx.dataset.label}: ${ctx.parsed.y.toFixed(2)}%`
          }
        },
        legend: {
          labels: { usePointStyle: true }
        },
        title: {
          display: true,
          text: 'Cumulative Returns (%)'
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            callback: val => val + '%'
          },
          title: { display: true, text: 'Cumulative Return (%)' }
        },
        x: {
          title: { display: true, text: 'Date' }
        }
      }
    }
  });

</script>

</body>
</html>
